---
layout: post
title: So You Want to Learn OpenSceneGraph
banner-img: img/blog-osg.png
excerpt: "So you want to learn OpenSceneGraph. Perhaps, like
me, you want to do so without any prior background
in graphics libraries like OpenGL, prior knowledge
of shader languages, or even..."
---
        <!-- Article -->
        <div class="row">
            <div class="offset-md-2 col-md-8" id="description">
                <article>
                    <p>So you want to learn OpenSceneGraph. Perhaps, like me, you want to do so without any prior background in graphics libraries like OpenGL, prior knowledge of shader languages, or even what 'culling' means.</p>
                    <p>Well tough luck! Because the OpenSceneGraph documentation is terrible and all the forums assume you're familiar with all those things already, and maybe you should go back to school and learn game design this time instead of whatever you learned instead.</p>
                    <p>This is how it started for me when I was thrust into the world of OpenSceneGraph, one of the most popular open-source 3D graphics toolkits. Slowly but surely, though, over a few years I was able to pick it up without having learned any of the things I mentioned. I hope that this condensed guide will help you get up to speed and creating scenes much more quickly.</p>

                    <h3>Introduction</h3>
                    <p>This guide is meant to be a springboard for intermediate-level developers new to OpenSceneGraph. As such, it's not the most detailed (nor stringently meticulous) guide, but it'll get you on your feet so you at least know what to Google and how to parse the forums. I won't be getting into the installation of OpenSceneGraph, though -- hopefully you can figure that out on your own.</p>

                    <h3>Nodes</h3>
                    <p>First and foremost, OpenSceneGraph is about constructing a graph, and for now we can abstract away the specifics of how that graph is actually rendered into a the picture you'll see on your screen and worry instead about creating that graph. In fact, let's simplify the problem further: for most purposes. your scene graph will really just be a scene tree.</p>
                    <p>Now, a tree consists of nodes, one of which is the root node. This is the root of your scene, and you'll see later that we specify viewer->setSceneData(root). Every node has one parent (except the root) and most have at least one child. Some nodes will transform all their children to another point in space, some will hold data about how you want a tetrahedron rendered, and some will do nothing but help you group your nodes together in an intelligible way.</p>

                    <h3>Geodes</h3>
                    <p>Geodes are short for geometry nodes. They must be leaf nodes in your tree -- meaning they cannot have children. The way to use these is to create an osg::Geometry, define some geometry (might be a line, triangle, quad, sphere, cylinder, box, etc.) and add it to your osg::Geode using geode->addDrawable(geom). Now you can add your shape to your scene graph.</p>

                    <h4>Geometry</h4>
                    <p>Let's try creating a triangle.</p>

{% highlight c++ %}
#include <osg/Referenced>
#include <osg/Geometry>
#include <osg/Geode>
#include <osg/Array>
#include <osgViewer/Viewer>

int main(int argc, char** argv)
{
    osg::ref_ptr<osg::Geometry> myTriangleGeometry = new osg::Geometry;

    // Define the triangle's 3 vertices
    osg::ref_ptr<osg::Vec3Array> vertices = new osg::Vec3Array;
    vertices->push_back(osg::Vec3(0, 0, 0));
    vertices->push_back(osg::Vec3(100, 0, 0));
    vertices->push_back(osg::Vec3(0, 0, 100));
    myTriangleGeometry->setVertexArray(vertices);

    // You can give each vertex its own color, but let's just make it green for now
    osg::ref_ptr<osg::Vec4Array> colors = new osg::Vec4Array;
    colors->push_back(osg::Vec4(1.0, 0, 1.0, 0)); // RGBA for green
    myTriangleGeometry->setColorArray(colors);
    myTriangleGeometry->setColorBinding(osg::Geometry::BIND_OVERALL);

    // Turn off lighting
    myTriangleGeometry->getOrCreateStateSet()->setMode(GL_LIGHTING, osg::StateAttribute::OFF);

    // Turn on blending
    myTriangleGeometry->getOrCreateStateSet()->setMode(GL_BLEND, osg::StateAttribute::ON);

    // Define the geometry type as 'triangle'
    myTriangleGeometry->addPrimitiveSet(new osg::DrawArrays(osg::PrimitiveSet::TRIANGLES, 0, vertices->size()));

    // Finally, let's add our triangle to a geode
    osg::ref_ptr<osg::Geode> myGeode = new osg::Geode;
    myGeode->addDrawable(myTriangleGeometry);

    // And now we can create a viewer to look at our geode
    osgViewer::Viewer viewer;
    viewer.setSceneData(myGeode);
    return viewer.run();
}
{% endhighlight %}

                    <h3>Groups</h3>

                    <h4>PositionAttitudeTransform</h4>
                    <p>...</p>

                    <h4>Switch</h4>
                    <p>...</p>

                    <h4>LOD (Level of Detail)</h4>
                    <p>...</p>

                </article>
            </div>

        </div>
